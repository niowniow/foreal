<!DOCTYPE html>
<html class="writer-html5" lang="en" >
<head>
    <meta charset="utf-8" />
    <meta http-equiv="X-UA-Compatible" content="IE=edge" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
      <link rel="shortcut icon" href="../img/favicon.ico" />
    <title>API Documentation - foReal Documentation</title>
    <link rel="stylesheet" href="../css/theme.css" />
    <link rel="stylesheet" href="../css/theme_extra.css" />
        <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/styles/github.min.css" />
    
      <script>
        // Current page data
        var mkdocs_page_name = "API Documentation";
        var mkdocs_page_input_path = "api.md";
        var mkdocs_page_url = null;
      </script>
    
    <script src="../js/jquery-3.6.0.min.js" defer></script>
    <!--[if lt IE 9]>
      <script src="../js/html5shiv.min.js"></script>
    <![endif]-->
      <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/10.5.0/highlight.min.js"></script>
      <script>hljs.initHighlightingOnLoad();</script> 
</head>

<body class="wy-body-for-nav" role="document">

  <div class="wy-grid-for-nav">
    <nav data-toggle="wy-nav-shift" class="wy-nav-side stickynav">
    <div class="wy-side-scroll">
      <div class="wy-side-nav-search">
          <a href=".." class="icon icon-home"> foReal Documentation
        </a><div role="search">
  <form id ="rtd-search-form" class="wy-form" action="../search.html" method="get">
      <input type="text" name="q" placeholder="Search docs" title="Type search term here" />
  </form>
</div>
      </div>

      <div class="wy-menu wy-menu-vertical" data-spy="affix" role="navigation" aria-label="Navigation menu">
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="..">Welcome to the foReal documentation</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../get_started/">Getting Started</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../concept/">Concepts</a>
                </li>
              </ul>
              <ul>
                <li class="toctree-l1"><a class="reference internal" href="../examples/">Examples</a>
                </li>
              </ul>
              <ul class="current">
                <li class="toctree-l1 current"><a class="reference internal current" href="./">API Documentation</a>
    <ul class="current">
    <li class="toctree-l2"><a class="reference internal" href="#configuration">Configuration</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#compute">compute</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#configuration_1">configuration</a>
    </li>
        </ul>
    </li>
    <li class="toctree-l2"><a class="reference internal" href="#class-node">Class Node</a>
        <ul>
    <li class="toctree-l3"><a class="reference internal" href="#merge_config">merge_config</a>
    </li>
    <li class="toctree-l3"><a class="reference internal" href="#configure">configure</a>
    </li>
        </ul>
    </li>
    </ul>
                </li>
              </ul>
      </div>
    </div>
    </nav>

    <section data-toggle="wy-nav-shift" class="wy-nav-content-wrap">
      <nav class="wy-nav-top" role="navigation" aria-label="Mobile navigation menu">
          <i data-toggle="wy-nav-top" class="fa fa-bars"></i>
          <a href="..">foReal Documentation</a>
        
      </nav>
      <div class="wy-nav-content">
        <div class="rst-content"><div role="navigation" aria-label="breadcrumbs navigation">
  <ul class="wy-breadcrumbs">
    <li><a href=".." class="icon icon-home" alt="Docs"></a> &raquo;</li>
      <li>API Documentation</li>
    <li class="wy-breadcrumbs-aside">
          <a href="https://github.com/niowniow/foreal/blob/main/docs/content/api.md" class="icon icon-github"> Edit on GitHub</a>
    </li>
  </ul>
  <hr/>
</div>
          <div role="main" class="document" itemscope="itemscope" itemtype="http://schema.org/Article">
            <div class="section" itemprop="articleBody">
              
                <h1 id="api-documentation">API Documentation</h1>
<h2 id="configuration">Configuration</h2>
<p>The function relevant for configuring the task graph and running it are <code>foreal.compute</code>. It calls the <code>configuration</code> function which itself progagates through the graph and calls each Node's <code>configure</code> function. </p>
<p><a id="foreal.convenience.compute"></a></p>
<p><a id="pydoc:foreal.convenience.compute"></a></p>
<h4 id="compute">compute</h4>
<pre><code class="language-python">def compute(graph, request)
</code></pre>
<p><a href="https://github.com/niowniow/foreal/blob/main/docs/../foreal/convenience.py#L242">[view_source]</a></p>
<p>Configures the given task graph <code>graph</code> using
foreal.core.configuration and runs the task graph
using dask.compute</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>graph</code> <em>foreal task graph</em> - the graph which should be computed</li>
<li><code>request</code> <em>dict</em> - request for configuring the computation</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>any</code> - The result of the processed task graph</li>
</ul>
<p><a id="foreal.core.graph.configuration"></a></p>
<p><a id="pydoc:foreal.core.graph.configuration"></a></p>
<h4 id="configuration_1">configuration</h4>
<pre><code class="language-python">def configuration(delayed,
                  request,
                  keys=None,
                  default_merge=None,
                  optimize_graph=True,
                  dependants=None,
                  clone_instead_merge=True)
</code></pre>
<p><a href="https://github.com/niowniow/foreal/blob/main/docs/../foreal/core/graph.py#L298">[view_source]</a></p>
<p>Configures each node of the graph by propagating the request from outputs
to inputs. Each node checks if it can fulfil the request and what it needs to fulfil
the request. If a node requires additional configurations to fulfil the request it
can set the 'requires_request' flag in the returned request and this function will
add the return request as a a new input to the node's <strong>call</strong>().
See also Node.configure()</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>delayed</code> <em>dask.delayed or list</em> - Delayed object or list of delayed objects</li>
<li><code>request</code> <em>dict or list</em> - request (dict), list of requests</li>
<li><code>keys</code> __type_, optional_ - <em>description</em>. Defaults to None.</li>
<li><code>default_merge</code> __type_, optional_ - <em>description</em>. Defaults to None.</li>
<li><code>optimize_graph</code> <em>bool, optional</em> - <em>description</em>. Defaults to True.</li>
<li><code>dependants</code> __type_, optional_ - <em>description</em>. Defaults to None.</li>
</ul>
<p><strong>Raises</strong>:</p>
<ul>
<li><code>RuntimeError</code> - If graph cannot be configured</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>dask.delayed</code> - The configured graph</li>
</ul>
<p><a id="foreal.core.graph.Node"></a></p>
<p><a id="pydoc:foreal.core.graph.Node"></a></p>
<h2 id="class-node">Class Node</h2>
<pre><code class="language-python">class Node(object)
</code></pre>
<p><a href="https://github.com/niowniow/foreal/blob/main/docs/../foreal/core/graph.py#L98">[view_source]</a></p>
<p><a id="foreal.core.graph.Node.merge_config"></a></p>
<p><a id="pydoc:foreal.core.graph.Node.merge_config"></a></p>
<h4 id="merge_config">merge_config</h4>
<pre><code class="language-python">def merge_config(request)
</code></pre>
<p><a href="https://github.com/niowniow/foreal/blob/main/docs/../foreal/core/graph.py#L111">[view_source]</a></p>
<p>Each request contains configuration which may apply to different
node instances. This function collects all information that apply to <em>this</em>
node (including it's preset configs) and adds a <code>self</code> keyword to the request.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>request</code> <em>dict</em> - The request and configuration options.</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>dict</code> - A new request which specific to this node.</li>
</ul>
<p><a id="foreal.core.graph.Node.configure"></a></p>
<p><a id="pydoc:foreal.core.graph.Node.configure"></a></p>
<h4 id="configure">configure</h4>
<pre><code class="language-python">def configure(requests)
</code></pre>
<p><a href="https://github.com/niowniow/foreal/blob/main/docs/../foreal/core/graph.py#L187">[view_source]</a></p>
<p>Before a task graph is executed each node is configured.
The request is propagated from the end to the beginning
of the DAG and each nodes "configure" routine is called.
The request can be updated to reflect additional requirements,
The return value gets passed to predecessors.</p>
<p>Essentially the following question must be answered within the
nodes configure function:
What do I need to fulfil the request of my successor? Either the node
can provide what is required or the request is passed through to
predecessors in hope they can fulfil the request.</p>
<p>Here, you must not configure the internal parameters of the
Node otherwise it would not be thread-safe. You can however
introduce a new key 'requires_request' in the request being
returned. This request will then be passed as an argument
to the <strong>call</strong> function.</p>
<p>Best practice is to configure the Node on initialization with
runtime independent configurations and define all runtime
dependant configurations here.</p>
<p><strong>Arguments</strong>:</p>
<ul>
<li><code>requests</code> <em>List</em> - List of requests (i.e. dictionaries).</li>
</ul>
<p><strong>Returns</strong>:</p>
<ul>
<li><code>dict</code> - The (updated) request. If updated, modifications
  must be made on a copy of the input. The return value
  must be a dictionary.
  If multiple requests are input to this function they
  must be merged.
  If nothing needs to be requested an empty dictionary
  can be return. This removes all dependencies of this
  node from the task graph.</li>
</ul>
              
            </div>
          </div><footer>
    <div class="rst-footer-buttons" role="navigation" aria-label="Footer Navigation">
        <a href="../examples/" class="btn btn-neutral float-left" title="Examples"><span class="icon icon-circle-arrow-left"></span> Previous</a>
    </div>

  <hr/>

  <div role="contentinfo">
    <!-- Copyright etc -->
  </div>

  Built with <a href="https://www.mkdocs.org/">MkDocs</a> using a <a href="https://github.com/readthedocs/sphinx_rtd_theme">theme</a> provided by <a href="https://readthedocs.org">Read the Docs</a>.
</footer>
          
        </div>
      </div>

    </section>

  </div>

  <div class="rst-versions" role="note" aria-label="Versions">
  <span class="rst-current-version" data-toggle="rst-current-version">
    
        <span>
          <a href="https://github.com/niowniow/foreal" class="fa fa-github" style="color: #fcfcfc"> GitHub</a>
        </span>
    
    
      <span><a href="../examples/" style="color: #fcfcfc">&laquo; Previous</a></span>
    
    
  </span>
</div>
    <script>var base_url = '..';</script>
    <script src="../js/theme_extra.js" defer></script>
    <script src="../js/theme.js" defer></script>
      <script src="../javascripts/mathjax.js" defer></script>
      <script src="https://polyfill.io/v3/polyfill.min.js?features=es6" defer></script>
      <script src="https://cdn.jsdelivr.net/npm/mathjax@3/es5/tex-mml-chtml.js" defer></script>
      <script src="../search/main.js" defer></script>
    <script defer>
        window.onload = function () {
            SphinxRtdTheme.Navigation.enable(true);
        };
    </script>

</body>
</html>
